<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Calculator</title>
    <style>
      td {
        padding : 5px 10px;
        text-align : center;
        font-size : 35px;
      }
      input {
        width : 100%; height : 100%;
        border : none;
        text-align : center;
        font-size : 50px;
      }
      #process{
        text-align : right;
        color : gray;

      }
      #result{
        text-align : right;
      }
    </style>
  </head>
  <body>
    <table border="2" width="700" height="900" align "center">
      <tr>
        <td colspan="4"><input type="text" onkeypress="checkTyping();" id="process" maxlength="24" value="0"></td>
      </tr>
      <tr>
        <td colspan="4"><input type="text" id="result" value="0" disabled></td>
      </tr>
      <tr>
        <td colspan="3" onclick="reset()">AC</td>
        <td onclick="add('/')" class="fucntion">/</td>
      </tr>
      <tr>
        <td onclick="add('7')">7</td>
        <td onclick="add('8')">8</td>
        <td onclick="add('9')">9</td>
        <td onclick="add('*')" class="function">*</td>
      </tr>
      <tr>
        <td onclick="add('4')">4</td>
        <td onclick="add('5')">5</td>
        <td onclick="add('6')">6</td>
        <td onclick="add('+')" class="function">+</td>
      </tr>
      <tr>
        <td onclick="add('1')">1</td>
        <td onclick="add('2')">2</td>
        <td onclick="add('3')">3</td>
        <td onclick="add('-')" class="function">-</td>
      </tr>
      <tr>
        <td colspan="2" onclick="add('0')">0</td>
        <td onclick="dotAdd('.')">.</td>
        <td onclick="calculation()">=</td>
      </tr>
    </table>
    <script>
      var processDisplay = document.getElementById('process');
      var resultDisplay = document.getElementById('result');
      var dotChecked = false;
      function dotAdd(char){
        if (!dotChecked){
          processDisplay.value += char;
          dotChecked = true;
        }
      }
      function add(char){
        var processLastword = processDisplay.value.charAt(processDisplay.value.length-1);
        if (processDisplay.value.length < 24) {
            if (processDisplay.value != "0" || char === "." || char === "-" || char === "+" || char === "*" || char === "/") {
              if (!isNaN(processLastword) || !isNaN(char)) {
                processDisplay.value += char;
              } else if(processLastword === "-" || processLastword === "+" || processLastword === "*" || processLastword === "/"){
                processDisplay.value = processDisplay.value.slice(0, -1);
                processDisplay.value += char;
              }
            } else if(processDisplay.value === "0" ) {
                processDisplay.value = char;
           }
          } else{
           alert("값을 더 입력할 수 없습니다!");
         }
        }
      function reset(){
       processDisplay.value = "0";
       resultDisplay.value = "0";
       dotChecked = false;
       }
      function calculation(){
        if(isNaN(processDisplay.value.charAt(processDisplay.value.length-1))){
          alert("수식을 다시 확인하세요!");
        } else {
          resultDisplay.value = resultComma(eval(processDisplay.value));
          processDisplay.value = "0";
        }
       }
      function resultComma(n){
        var numberParts = n.toString().split('.');
        if (numberParts.length > 1) {
          return numberParts[0].replace(/\B(?=(\d{3})+(?!\d))/g,",") + '.' + numberParts[1];
        } else {
          return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");
        }
      }
      function checkTyping(obj) {
       if(event.keyCode === 106 || event.keyCode === 8 || event.keyCode === 46 || event.keyCode === 107
          || event.keyCode === 109 || event.keyCode === 111 || event.keyCode === 110 || event.keyCode >= 37 && event.keyCode <= 40
          || event.keyCode >= 48 && event.keyCode <= 57 || event.keyCode >= 96 && event.keyCode <= 105){
         event.returnValue = true;
       } else {
         event.returnValue = false;
       }
      }
    </script>
  </body>
</html>
