<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Calculator</title>
    <style>
      td {
        padding : 5px 10px;
        text-align : center;
        font-size : 35px;
      }
      input {
        width : 100%; height : 100%;
        border : none;
        text-align : center;
        font-size : 50px;
      }
      #process{
        text-align : right;
        color : gray;

      }
      #result{
        text-align : right;
      }
    </style>
  </head>
  <body>
    <table border="2" width="700" height="900" align "center">
      <tr>
        <td colspan="4"><input type="text" onkeypress="return checkTyping(this)" id="process" maxlength="24"></td>
      </tr>
      <tr>
        <td colspan="4"><input type="text" id="result" disabled></td>
      </tr>
      <tr>
        <td colspan="3" onclick="reset()">AC</td>
        <td onclick="add('/')" class="fucntion">/</td>
      </tr>
      <tr>
        <td onclick="add('7')">7</td>
        <td onclick="add('8')">8</td>
        <td onclick="add('9')">9</td>
        <td onclick="add('*')" class="function">*</td>
      </tr>
      <tr>
        <td onclick="add('4')">4</td>
        <td onclick="add('5')">5</td>
        <td onclick="add('6')">6</td>
        <td onclick="add('+')" class="function">+</td>
      </tr>
      <tr>
        <td onclick="add('1')">1</td>
        <td onclick="add('2')">2</td>
        <td onclick="add('3')">3</td>
        <td onclick="add('-')" class="function">-</td>
      </tr>
      <tr>
        <td colspan="2" onclick="add(0)">0</td>
        <td onclick="add('.')" class="function">.</td>
        <td onclick="calculation()" class="function">=</td>
      </tr>
    </table>
    <script>
      var processDisplay = document.getElementById('process');
      var resultDisplay = document.getElementById('result');

      function add(char){
        if (processDisplay.value.length < 24) {
          processDisplay.value += char;
        } else {
          alert("값을 더 입력할 수 없습니다!");
        }
      }
      function reset(){
      var resetConfirm = confirm("정말 초기화 하시겠습니까?");
      if(resetConfirm === true){
      document.getElementById('process').value = "";
      document.getElementById('result').value = "";
       }
      }
      function calculation(){
        if(isNaN(processDisplay.value.charAt(processDisplay.value.length-1))){
          alert("수식을 다시 확인하세요!");
        } else {
          resultDisplay.value = resultComma(eval(processDisplay.value));
        }
      }
      function resultComma(n){
        var numberParts = n.toString().split('.');
        if (numberParts.length > 1) {
          return numberParts[0].replace(/\B(?=(\d{3})+(?!\d))/g,",") + '.' + numberParts[1];
        } else {
          return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");
        }
      }
      function checkTyping() {
      if(event.key === '.'
         || event.key === '-'
         || event.key === '+'
         || event.key === '/'
         || event.key === '*'
         || event.key >= 0 && event.key <= 9) {
        return true;
      }
      return false;
      }

      // function functionRule(char){
      //   var functionKey = document.getElementsByClassName('function');
      //   var display = document.getElementById('process');
      //   for (var i = 0; i < 5; i++) {
      //     if(functionKey[i] != "char"){
      //       display.value += char;
      //     } else {
      //       alert("값을 더 입력할 수 없습니다!");
      //     }
      //   }
      // }

    </script>
  </body>
</html>
